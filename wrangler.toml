name = "cloudflare-worker-pixel-router"
main = "src/index.ts"
compatibility_date = "2024-01-01"

[site]
bucket = "./src/admin/ui"
# KV Namespace for pixel configuration
[[kv_namespaces]]
binding = "PIXEL_CONFIG"
id = "de87977f940b497b85e952b8fee620b3" # Updated PIXEL_CONFIG ID

# KV Namespace for pixel state
[[kv_namespaces]]
binding = "PIXEL_STATE"
id = "0d279ec802c34455863cbd272e55d5d7"

# Development environment
[env.dev]
vars = { ENVIRONMENT = "dev" }

[[env.dev.kv_namespaces]]
binding = "PIXEL_CONFIG"
# id = "d6db5d0cfcb14e98b2d7f1bd5567f74f" # Omit ID to use local simulation
# preview = true # Omit preview flag

[[env.dev.kv_namespaces]]
binding = "PIXEL_STATE"
# id = "..." # Omit ID for local simulation

# Production environment
[env.production]
vars = { ENVIRONMENT = "production" }

[[env.production.kv_namespaces]]
binding = "PIXEL_CONFIG"
id = "de87977f940b497b85e952b8fee620b3" # Updated PIXEL_CONFIG ID

[[env.production.kv_namespaces]]
binding = "PIXEL_STATE"
id = "0d279ec802c34455863cbd272e55d5d7"

[vars]
# Default values for testing (overridden in production)
STICKYIO_API_KEY = "test_key"